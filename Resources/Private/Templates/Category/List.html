<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">

<f:for each="{categories}" as="category">
<div class="category">
	<h2>{category.title}</h2>
	<ul class="books">
		<f:for each="{category.books}" as="book">
			<li><f:link.action action="show" pageUid="{settings.categoryPageId}" arguments="{book: book.uid}">{book.title}</f:link.action></li>
		</f:for>
	</ul>
</div>
</f:for>

</html>